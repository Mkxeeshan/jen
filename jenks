pipeline {
    agent any
    
    stages {
        stage ("Build") {
            steps {
                echo "Build the code using build automation tool Maven to compile and package the code "
            }
            Post {
                Success {
                Mail to: “muhamadbrind@gmail.com”,
                Subject: “ Test Stage Completed”
                Body: “Successful in the test stage”
                }
            }
        }
        stage ("Unit & Integrationg Testing") { 
            steps {
                echo "Run unit tests using Junit to ensure the code functions as expected and run integration tests using Citrus to ensure the different components of the application work together as expected"
            }
        }
      stage ("Code Analysis")  {
            steps {
                echo "Integrate code analysis tool FindBugs to analyse the code and ensure it meets industry standards"
            }
        }
      stage ("Security Scan") {
            steps {
                echo "Perform a security scan on the code using Probely to identify any vulnerabilities"
            }
            Post {
                Success {
                Mail to: “muhamadbrind@gmail.com”,
                Subject: “ Security Scan Stage Completed”
                Body: “Successful in the Security Scan stage”
                }
            }
        }
      stage ("Deploy to Staging") {
            steps {
                echo "Deploy the application to the staging server - AWS EC2 instance"
            }
        }
      stage ("Integration Tests on Staging") {
            steps {
                echo "Run integration tests on the staging environment to ensure the application functions as expected in a production-like environment"
            }
        }
      stage ("Deploy to Production") {
            steps {
                echo "Deploy the application to the production server - AWS EC2 instance"
            }
      }
    }
}